<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–¬æœ¨è‹±èª - é›™å‘è²»æ›¼å­¸ç¿’å¹³å°</title>
    
    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Local Styles -->
    <style>
        /* åŸºç¤æ¨£å¼è¨­å®š */
        body {
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        .font-serif { 
            font-family: 'Noto Serif TC', serif; 
        }

        .smooth-transition { 
            transition: all 0.3s ease-in-out; 
        }

        /* å‹•æ…‹èƒŒæ™¯æ•ˆæœ */
        .dynamic-bg {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ç»ç’ƒæ“¬æ…‹æ•ˆæœ */
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        /* æ¨¡çµ„åˆ‡æ›å‹•ç•« */
        .module-fade-enter-active, 
        .module-fade-leave-active { 
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1); 
        }

        .module-fade-enter-from { 
            opacity: 0;
            transform: translateY(30px) scale(0.95);
        }

        .module-fade-leave-to { 
            opacity: 0;
            transform: translateY(-30px) scale(0.95);
        }

        /* ç¿»å¡ 3D ç¿»è½‰æ•ˆæœ */
        .flashcard-container {
            perspective: 1000px;
            height: 400px;
        }

        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
        }

        .flashcard.is-flipped { 
            transform: rotateY(180deg); 
        }

        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .flashcard-front { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flashcard-back { 
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg); 
        }

        /* è²»æ›¼å­¸ç¿’å¡ç‰‡ */
        .feynman-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feynman-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* å¼·è¿«å­¸ç¿’é€²åº¦æ¢ */
        .force-progress {
            height: 8px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .force-progress::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* æ¸¬é©—å›é¥‹æ¨£å¼ */
        .option-button {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            transform: translateY(0);
        }

        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .option-button.correct { 
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            transform: scale(1.02);
        }

        .option-button.incorrect { 
            background: linear-gradient(135deg, #f56565, #e53e3e);
            color: white;
            transform: scale(0.98);
        }

        /* å­¸ç¿’çµ±è¨ˆåœ–è¡¨ */
        .stat-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: conic-gradient(from 0deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7, #ff6b6b);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .stat-inner {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆå¢å¼· */
        @media (max-width: 768px) {
            .flashcard-container {
                height: 350px;
            }
            
            .feynman-card {
                padding: 1rem;
            }
            
            .stat-circle {
                width: 100px;
                height: 100px;
            }
            
            .stat-inner {
                width: 75px;
                height: 75px;
            }
        }

        /* æ‡¸æµ®å‹•æ•ˆ */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* è„ˆè¡æ•ˆæœ */
        .pulse-ring {
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        /* ç™»å…¥ç‹€æ…‹æŒ‡ç¤ºå™¨ */
        .user-indicator {
            position: relative;
            overflow: hidden;
        }

        .user-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .user-indicator:hover::before {
            left: 100%;
        }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.0/cdn.min.js" defer></script>
</head>
<body class="dynamic-bg min-h-screen" x-data="qiaomuApp()">
    
    <!-- é ‚éƒ¨å°èˆª -->
    <header class="glass-morphism sticky top-0 z-50 backdrop-blur-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div @click="resetToHome()" 
                     class="text-2xl font-black text-white font-serif cursor-pointer hover:text-yellow-200 transform hover:scale-105 transition-all duration-300 floating">
                    <i class="fas fa-graduation-cap mr-2"></i>å–¬æœ¨è‹±èª
                </div>
                
                <!-- ç”¨æˆ¶è³‡è¨Š -->
                <div class="user-indicator flex items-center space-x-4 text-white">
                    <div class="hidden sm:block text-right">
                        <p class="text-sm opacity-90" x-text="currentUser.name"></p>
                        <p class="text-xs opacity-70">é€£çºŒå­¸ç¿’ <span x-text="learningStreak"></span> å¤©</p>
                    </div>
                    <div class="relative">
                        <div class="w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div class="absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full pulse-ring"></div>
                    </div>
                </div>
            </div>
            
            <!-- ä¸»å°èˆª -->
            <div class="mt-4 flex justify-center space-x-1 sm:space-x-4 overflow-x-auto">
                <button @click="currentModule = 'dashboard'" 
                        :class="{'bg-white bg-opacity-30 text-white': currentModule === 'dashboard', 'text-white text-opacity-70 hover:text-white hover:bg-white hover:bg-opacity-20': currentModule !== 'dashboard'}" 
                        class="px-3 py-2 rounded-lg transition-all duration-300 text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-tachometer-alt mr-1 sm:mr-2"></i>å„€è¡¨æ¿
                </button>
                <button @click="currentModule = 'words'" 
                        :class="{'bg-white bg-opacity-30 text-white': currentModule === 'words', 'text-white text-opacity-70 hover:text-white hover:bg-white hover:bg-opacity-20': currentModule !== 'words'}" 
                        class="px-3 py-2 rounded-lg transition-all duration-300 text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-book mr-1 sm:mr-2"></i>å–®å­—å­¸ç¿’
                </button>
                <button @click="currentModule = 'feynman'" 
                        :class="{'bg-white bg-opacity-30 text-white': currentModule === 'feynman', 'text-white text-opacity-70 hover:text-white hover:bg-white hover:bg-opacity-20': currentModule !== 'feynman'}" 
                        class="px-3 py-2 rounded-lg transition-all duration-300 text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-brain mr-1 sm:mr-2"></i>è²»æ›¼å­¸ç¿’
                </button>
                <button @click="currentModule = 'force'" 
                        :class="{'bg-white bg-opacity-30 text-white': currentModule === 'force', 'text-white text-opacity-70 hover:text-white hover:bg-white hover:bg-opacity-20': currentModule !== 'force'}" 
                        class="px-3 py-2 rounded-lg transition-all duration-300 text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-dumbbell mr-1 sm:mr-2"></i>å¼·è¿«å­¸ç¿’
                </button>
                <button @click="currentModule = 'quiz'" 
                        :class="{'bg-white bg-opacity-30 text-white': currentModule === 'quiz', 'text-white text-opacity-70 hover:text-white hover:bg-white hover:bg-opacity-20': currentModule !== 'quiz'}" 
                        class="px-3 py-2 rounded-lg transition-all duration-300 text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-tasks mr-1 sm:mr-2"></i>æ¸¬é©—
                </button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- å„€è¡¨æ¿æ¨¡çµ„ -->
        <div x-show="currentModule === 'dashboard'" 
             x-transition:enter="module-fade-enter-active" 
             x-transition:enter-start="module-fade-enter-from" 
             x-transition:enter-end="" 
             x-transition:leave="module-fade-leave-active" 
             x-transition:leave-start="" 
             x-transition:leave-end="module-fade-leave-to">
            
            <h2 class="text-3xl font-bold text-white text-center mb-8 floating">
                <i class="fas fa-chart-line mr-3"></i>å­¸ç¿’å„€è¡¨æ¿
            </h2>
            
            <!-- å­¸ç¿’çµ±è¨ˆå¡ç‰‡ -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="glass-morphism rounded-xl p-6 text-center text-white">
                    <div class="stat-circle mx-auto mb-4">
                        <div class="stat-inner">
                            <div class="text-2xl font-bold text-gray-800" x-text="words.length"></div>
                            <div class="text-xs text-gray-600">å–®å­—</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold">å·²å­¸å–®å­—</h3>
                </div>
                
                <div class="glass-morphism rounded-xl p-6 text-center text-white">
                    <div class="text-4xl mb-2">
                        <i class="fas fa-brain text-yellow-300"></i>
                    </div>
                    <div class="text-2xl font-bold" x-text="feynmanProgress.completed"></div>
                    <h3 class="text-lg font-semibold">è²»æ›¼è§£é‡‹</h3>
                </div>
                
                <div class="glass-morphism rounded-xl p-6 text-center text-white">
                    <div class="text-4xl mb-2">
                        <i class="fas fa-dumbbell text-red-300"></i>
                    </div>
                    <div class="text-2xl font-bold" x-text="forceProgress.level"></div>
                    <h3 class="text-lg font-semibold">å¼·è¿«ç­‰ç´š</h3>
                </div>
                
                <div class="glass-morphism rounded-xl p-6 text-center text-white">
                    <div class="text-4xl mb-2">
                        <i class="fas fa-trophy text-green-300"></i>
                    </div>
                    <div class="text-2xl font-bold" x-text="getAccuracyRate() + '%'"></div>
                    <h3 class="text-lg font-semibold">æº–ç¢ºç‡</h3>
                </div>
            </div>
            
            <!-- å­¸ç¿’å»ºè­° -->
            <div class="glass-morphism rounded-xl p-6 text-white mb-8">
                <h3 class="text-xl font-bold mb-4">
                    <i class="fas fa-lightbulb text-yellow-300 mr-2"></i>ä»Šæ—¥å­¸ç¿’å»ºè­°
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white bg-opacity-20 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">
                            <i class="fas fa-book-open mr-2"></i>ç¹¼çºŒå–®å­—å­¸ç¿’
                        </h4>
                        <p class="text-sm opacity-90">é‚„æœ‰ <span x-text="getRemainingWords()"></span> å€‹å–®å­—ç­‰å¾…å­¸ç¿’</p>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">
                            <i class="fas fa-chalkboard-teacher mr-2"></i>ç·´ç¿’è²»æ›¼è¬›è§£
                        </h4>
                        <p class="text-sm opacity-90">ç”¨è‡ªå·±çš„è©±è§£é‡‹å­¸éçš„å–®å­—</p>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">
                            <i class="fas fa-clock mr-2"></i>å¼·è¿«å­¸ç¿’æŒ‘æˆ°
                        </h4>
                        <p class="text-sm opacity-90">è¨­å®šæ™‚é–“é™åˆ¶ï¼Œæå‡å­¸ç¿’æ•ˆç‡</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å–®å­—å­¸ç¿’æ¨¡çµ„ -->
        <div x-show="currentModule === 'words'" 
             x-transition:enter="module-fade-enter-active" 
             x-transition:enter-start="module-fade-enter-from" 
             x-transition:enter-end="" 
             x-transition:leave="module-fade-leave-active" 
             x-transition:leave-start="" 
             x-transition:leave-end="module-fade-leave-to">
            
            <h2 class="text-3xl font-bold text-white text-center mb-8 floating">
                <i class="fas fa-book mr-3"></i>å–®å­—å­¸ç¿’
            </h2>
            
            <div class="max-w-2xl mx-auto">
                <div class="flashcard-container mb-8">
                    <div class="flashcard" :class="{ 'is-flipped': wordCardFlipped }" @click="wordCardFlipped = !wordCardFlipped">
                        <!-- æ­£é¢ -->
                        <div class="flashcard-face flashcard-front">
                            <div class="text-5xl font-bold mb-4" x-text="currentWordData.word"></div>
                            <div class="text-xl opacity-80" x-text="currentWordData.phonetic"></div>
                            <div class="absolute bottom-4 right-4 text-sm opacity-60">
                                é»æ“Šç¿»å¡
                            </div>
                        </div>
                        
                        <!-- èƒŒé¢ -->
                        <div class="flashcard-face flashcard-back">
                            <div class="w-full h-full flex flex-col justify-between p-4">
                                <div class="space-y-4">
                                    <div class="text-center">
                                        <h3 class="text-xl font-bold mb-2">é‡‹ç¾©</h3>
                                        <p class="text-lg" x-text="currentWordData.definition"></p>
                                    </div>
                                    
                                    <div class="text-center" x-show="currentWordData.etymology">
                                        <h3 class="text-lg font-bold mb-2">è©æ ¹è§£æ</h3>
                                        <p class="text-sm opacity-90" x-text="currentWordData.etymology"></p>
                                    </div>
                                    
                                    <div class="text-center">
                                        <h3 class="text-lg font-bold mb-2">ä¾‹å¥</h3>
                                        <p class="text-sm italic opacity-90" x-text="currentWordData.sentence"></p>
                                    </div>
                                </div>
                                
                                <div class="text-center mt-4">
                                    <button @click.stop="startFeynmanExplanation()" 
                                            class="bg-white bg-opacity-30 text-white px-4 py-2 rounded-lg hover:bg-opacity-50 transition-all duration-300">
                                        <i class="fas fa-brain mr-2"></i>è²»æ›¼è§£é‡‹
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å°èˆªæŒ‰éˆ• -->
                <div class="flex justify-between items-center mb-8">
                    <button @click="prevWord()" 
                            :disabled="currentWordIndex === 0" 
                            class="flex items-center px-6 py-3 bg-white bg-opacity-20 text-white rounded-xl hover:bg-opacity-30 disabled:opacity-50 disabled:cursor-not-allowed smooth-transition">
                        <i class="fas fa-chevron-left mr-2"></i> ä¸Šä¸€å€‹
                    </button>

                    <div class="text-white text-center">
                        <div class="text-lg font-semibold" x-text="`${currentWordIndex + 1} / ${words.length}`"></div>
                        <div class="text-sm opacity-70">å–®å­—é€²åº¦</div>
                    </div>

                    <button @click="nextWord()" 
                            :disabled="currentWordIndex >= words.length - 1"
                            class="flex items-center px-6 py-3 bg-white bg-opacity-20 text-white rounded-xl hover:bg-opacity-30 disabled:opacity-50 disabled:cursor-not-allowed smooth-transition">
                        ä¸‹ä¸€å€‹ <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
                
                <!-- é€²åº¦æ¢ -->
                <div class="force-progress mb-4" style="width: 100%;">
                    <div class="h-full bg-white bg-opacity-30 transition-all duration-500" 
                         :style="`width: ${((currentWordIndex + 1) / words.length) * 100}%`"></div>
                </div>
            </div>
        </div>

        <!-- è²»æ›¼å­¸ç¿’æ¨¡çµ„ -->
        <div x-show="currentModule === 'feynman'" 
             x-transition:enter="module-fade-enter-active" 
             x-transition:enter-start="module-fade-enter-from" 
             x-transition:enter-end="" 
             x-transition:leave="module-fade-leave-active" 
             x-transition:leave-start="" 
             x-transition:leave-end="module-fade-leave-to">
            
            <h2 class="text-3xl font-bold text-white text-center mb-8 floating">
                <i class="fas fa-brain mr-3"></i>è²»æ›¼å­¸ç¿’æ³•
            </h2>
            
            <div class="max-w-4xl mx-auto">
                <!-- è²»æ›¼å­¸ç¿’èªªæ˜ -->
                <div class="glass-morphism rounded-xl p-6 text-white mb-8">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-info-circle mr-2"></i>ä»€éº¼æ˜¯è²»æ›¼å­¸ç¿’æ³•ï¼Ÿ
                    </h3>
                    <p class="mb-4">è²»æ›¼å­¸ç¿’æ³•æ˜¯ä¸€ç¨®é€šéã€Œæ•™æˆä»–äººã€ä¾†åŠ æ·±ç†è§£çš„å­¸ç¿’æ–¹æ³•ã€‚ç•¶ä½ èƒ½ç”¨ç°¡å–®çš„è©±è§£é‡‹è¤‡é›œçš„æ¦‚å¿µæ™‚ï¼Œå°±è¡¨ç¤ºä½ çœŸæ­£ç†è§£äº†ã€‚</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ“š é¸æ“‡æ¦‚å¿µ</h4>
                            <p class="text-sm">é¸æ“‡ä¸€å€‹ä½ æƒ³è¦å­¸ç¿’çš„å–®å­—æˆ–æ¦‚å¿µ</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ‘¨â€ğŸ« ç°¡å–®è§£é‡‹</h4>
                            <p class="text-sm">ç”¨ä½ è‡ªå·±çš„è©±ï¼Œåƒæ•™å°å­©ä¸€æ¨£è§£é‡‹</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ” æ‰¾å‡ºæ¼æ´</h4>
                            <p class="text-sm">ç™¼ç¾è§£é‡‹ä¸­çš„ä¸è¶³ä¹‹è™•</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ“– é‡æ–°å­¸ç¿’</h4>
                            <p class="text-sm">å›åˆ°åŸææ–™ï¼Œå¡«è£œçŸ¥è­˜æ¼æ´</p>
                        </div>
                    </div>
                </div>
                
                <!-- è²»æ›¼ç·´ç¿’å€ -->
                <div class="feynman-card mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                        <i class="fas fa-chalkboard-teacher mr-2"></i>é–‹å§‹ä½ çš„è²»æ›¼è§£é‡‹
                    </h3>
                    
                    <!-- é¸æ“‡å–®å­— -->
                    <div class="mb-6">
                        <label class="block text-gray-700 font-semibold mb-3">é¸æ“‡è¦è§£é‡‹çš„å–®å­—ï¼š</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            <template x-for="(word, index) in words" :key="index">
                                <button @click="selectFeynmanWord(index)"
                                        :class="{'bg-blue-500 text-white': feynmanWordIndex === index, 'bg-gray-200 text-gray-700 hover:bg-gray-300': feynmanWordIndex !== index}"
                                        class="px-4 py-2 rounded-lg transition-all duration-300 font-medium"
                                        x-text="word.word">
                                </button>
                            </template>
                        </div>
                    </div>
                    
                    <!-- è§£é‡‹è¼¸å…¥å€ -->
                    <div class="mb-6" x-show="feynmanWordIndex !== -1">
                        <label class="block text-gray-700 font-semibold mb-3">
                            ç”¨ç°¡å–®çš„è©±è§£é‡‹ "<span x-text="currentFeynmanWord.word" class="text-blue-600"></span>"ï¼š
                        </label>
                        <textarea x-model="feynmanExplanation"
                                  placeholder="æƒ³åƒä½ åœ¨æ•™ä¸€å€‹10æ­²çš„å­©å­ï¼Œç”¨æœ€ç°¡å–®çš„èªè¨€è§£é‡‹é€™å€‹å–®å­—..."
                                  class="w-full h-32 p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none resize-none"
                                  @input="checkFeynmanExplanation()"></textarea>
                        <div class="mt-2 text-sm text-gray-600">
                            å»ºè­°å­—æ•¸ï¼š<span x-text="feynmanExplanation.length"></span> / 100+
                        </div>
                    </div>
                    
                    <!-- AI åé¥‹ -->
                    <div x-show="feynmanFeedback" class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                        <h4 class="font-semibold text-blue-800 mb-2">
                            <i class="fas fa-robot mr-2"></i>AI åé¥‹
                        </h4>
                        <p class="text-blue-700" x-text="feynmanFeedback"></p>
                    </div>
                    
                    <!-- æäº¤æŒ‰éˆ• -->
                    <div class="text-center" x-show="feynmanWordIndex !== -1">
                        <button @click="submitFeynmanExplanation()"
                                :disabled="feynmanExplanation.length < 50"
                                class="px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-paper-plane mr-2"></i>æäº¤è§£é‡‹
                        </button>
                    </div>
                </div>
                
                <!-- è²»æ›¼å­¸ç¿’æ­·å² -->
                <div class="glass-morphism rounded-xl p-6 text-white">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-history mr-2"></i>æˆ‘çš„è²»æ›¼è§£é‡‹è¨˜éŒ„
                    </h3>
                    <div class="space-y-4" x-show="feynmanHistory.length > 0">
                        <template x-for="(record, index) in feynmanHistory" :key="index">
                            <div class="bg-white bg-opacity-20 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-semibold" x-text="record.word"></h4>
                                    <span class="text-sm opacity-70" x-text="record.date"></span>
                                </div>
                                <p class="text-sm opacity-90 mb-2" x-text="record.explanation"></p>
                                <div class="flex items-center">
                                    <div class="flex text-yellow-400">
                                        <template x-for="i in 5" :key="i">
                                            <i :class="i <= record.rating ? 'fas fa-star' : 'far fa-star'"></i>
                                        </template>
                                    </div>
                                    <span class="ml-2 text-sm" x-text="record.feedback"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                    <div x-show="feynmanHistory.length === 0" class="text-center py-8 opacity-70">
                        <i class="fas fa-clipboard-list text-4xl mb-4"></i>
                        <p>é‚„æ²’æœ‰è²»æ›¼è§£é‡‹è¨˜éŒ„ï¼Œé–‹å§‹ä½ çš„ç¬¬ä¸€æ¬¡è§£é‡‹å§ï¼</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¼·è¿«å­¸ç¿’æ¨¡çµ„ -->
        <div x-show="currentModule === 'force'" 
             x-transition:enter="module-fade-enter-active" 
             x-transition:enter-start="module-fade-enter-from" 
             x-transition:enter-end="" 
             x-transition:leave="module-fade-leave-active" 
             x-transition:leave-start="" 
             x-transition:leave-end="module-fade-leave-to">
            
            <h2 class="text-3xl font-bold text-white text-center mb-8 floating">
                <i class="fas fa-dumbbell mr-3"></i>å¼·è¿«å­¸ç¿’æ³•
            </h2>
            
            <div class="max-w-4xl mx-auto">
                <!-- å¼·è¿«å­¸ç¿’èªªæ˜ -->
                <div class="glass-morphism rounded-xl p-6 text-white mb-8">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-stopwatch mr-2"></i>ä»€éº¼æ˜¯å¼·è¿«å­¸ç¿’æ³•ï¼Ÿ
                    </h3>
                    <p class="mb-4">å¼·è¿«å­¸ç¿’æ³•é€šéè¨­å®šæ™‚é–“é™åˆ¶å’Œç‰¹å®šæ¢ä»¶ï¼Œè¿«ä½¿å¤§è…¦åœ¨å£“åŠ›ä¸‹é«˜æ•ˆå­¸ç¿’ï¼Œæå‡è¨˜æ†¶æ•ˆæœå’Œå°ˆæ³¨åŠ›ã€‚</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">â° æ™‚é–“å£“åŠ›</h4>
                            <p class="text-sm">é™åˆ¶å­¸ç¿’æ™‚é–“ï¼Œæé«˜æ•ˆç‡</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ¯ ç›®æ¨™æ˜ç¢º</h4>
                            <p class="text-sm">è¨­å®šå…·é«”çš„å­¸ç¿’ç›®æ¨™</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ğŸ† å³æ™‚åé¥‹</h4>
                            <p class="text-sm">ç«‹å³ç²å¾—å­¸ç¿’æˆæœ</p>
                        </div>
                    </div>
                </div>
                
                <!-- å¼·è¿«å­¸ç¿’æŒ‘æˆ°é¸æ“‡ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- å¿«é€Ÿè¨˜æ†¶æŒ‘æˆ° -->
                    <div class="feynman-card cursor-pointer" @click="startForceChallenge('memory')">
                        <div class="text-center">
                            <div class="text-4xl mb-4">ğŸ§ </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">å¿«é€Ÿè¨˜æ†¶æŒ‘æˆ°</h3>
                            <p class="text-gray-600 mb-4">åœ¨é™å®šæ™‚é–“å…§è¨˜ä½ç›¡å¯èƒ½å¤šçš„å–®å­—</p>
                            <div class="bg-blue-100 rounded-lg p-3">
                                <div class="text-sm text-blue-800">ç›®æ¨™ï¼š60ç§’å…§è¨˜ä½10å€‹å–®å­—</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é–ƒé›»æ¸¬é©— -->
                    <div class="feynman-card cursor-pointer" @click="startForceChallenge('quiz')">
                        <div class="text-center">
                            <div class="text-4xl mb-4">âš¡</div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">é–ƒé›»æ¸¬é©—</h3>
                            <p class="text-gray-600 mb-4">å¿«é€Ÿå›ç­”å–®å­—å•é¡Œï¼Œè€ƒé©—åæ‡‰é€Ÿåº¦</p>
                            <div class="bg-red-100 rounded-lg p-3">
                                <div class="text-sm text-red-800">ç›®æ¨™ï¼š30ç§’å…§ç­”å°5é¡Œ</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å¼·è¿«å­¸ç¿’é€²è¡Œä¸­ -->
                <div x-show="forceChallenge.active" class="glass-morphism rounded-xl p-6 text-white">
                    <!-- å€’è¨ˆæ™‚é¡¯ç¤º -->
                    <div class="text-center mb-6">
                        <div class="text-6xl font-bold mb-2" 
                             :class="{'text-red-400 animate-pulse': forceChallenge.timeLeft <= 10, 'text-white': forceChallenge.timeLeft > 10}"
                             x-text="forceChallenge.timeLeft"></div>
                        <div class="text-lg opacity-80">ç§’</div>
                        <div class="force-progress mt-4">
                            <div class="h-full bg-gradient-to-r from-green-400 to-red-400 transition-all duration-1000" 
                                 :style="`width: ${(1 - forceChallenge.timeLeft / forceChallenge.totalTime) * 100}%`"></div>
                        </div>
                    </div>
                    
                    <!-- è¨˜æ†¶æŒ‘æˆ°å…§å®¹ -->
                    <div x-show="forceChallenge.type === 'memory'">
                        <h3 class="text-xl font-bold text-center mb-6">è¨˜ä½é€™äº›å–®å­—ï¼š</h3>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                            <template x-for="(word, index) in forceChallenge.words" :key="index">
                                <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                                    <div class="text-lg font-bold" x-text="word.word"></div>
                                    <div class="text-sm opacity-80" x-text="word.definition"></div>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    <!-- æ¸¬é©—æŒ‘æˆ°å…§å®¹ -->
                    <div x-show="forceChallenge.type === 'quiz' && forceChallenge.currentQuestion">
                        <h3 class="text-xl font-bold text-center mb-6" x-text="forceChallenge.currentQuestion.question"></h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <template x-for="(option, index) in forceChallenge.currentQuestion.options" :key="index">
                                <button @click="answerForceQuestion(index)"
                                        class="bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg p-4 text-left transition-all duration-300"
                                        x-text="option">
                                </button>
                            </template>
                        </div>
                    </div>
                    
                    <!-- é€²åº¦é¡¯ç¤º -->
                    <div class="text-center mt-6">
                        <div class="text-lg font-semibold">
                            é€²åº¦ï¼š<span x-text="forceChallenge.score"></span> / <span x-text="forceChallenge.target"></span>
                        </div>
                    </div>
                </div>
                
                <!-- å¼·è¿«å­¸ç¿’çµæœ -->
                <div x-show="forceChallenge.completed" class="glass-morphism rounded-xl p-6 text-white text-center">
                    <div class="text-4xl mb-4">
                        <i :class="forceChallenge.success ? 'fas fa-trophy text-yellow-400' : 'fas fa-clock text-red-400'"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4" 
                        x-text="forceChallenge.success ? 'æŒ‘æˆ°æˆåŠŸï¼' : 'æ™‚é–“åˆ°ï¼'"></h3>
                    <p class="text-lg mb-6">
                        ä½ çš„å¾—åˆ†ï¼š<span class="font-bold" x-text="forceChallenge.score"></span> / <span x-text="forceChallenge.target"></span>
                    </p>
                    <div class="space-x-4">
                        <button @click="retryForceChallenge()" 
                                class="px-6 py-3 bg-blue-500 hover:bg-blue-600 rounded-lg transition-all duration-300">
                            <i class="fas fa-redo mr-2"></i>å†æ¬¡æŒ‘æˆ°
                        </button>
                        <button @click="endForceChallenge()" 
                                class="px-6 py-3 bg-gray-500 hover:bg-gray-600 rounded-lg transition-all duration-300">
                            <i class="fas fa-home mr-2"></i>è¿”å›
                        </button>
                    </div>
                </div>
                
                <!-- å¼·è¿«å­¸ç¿’çµ±è¨ˆ -->
                <div class="glass-morphism rounded-xl p-6 text-white">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-chart-bar mr-2"></i>å¼·è¿«å­¸ç¿’çµ±è¨ˆ
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold" x-text="forceProgress.totalChallenges"></div>
                            <div class="text-sm opacity-80">ç¸½æŒ‘æˆ°æ¬¡æ•¸</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold" x-text="forceProgress.successRate + '%'"></div>
                            <div class="text-sm opacity-80">æˆåŠŸç‡</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold" x-text="forceProgress.bestScore"></div>
                            <div class="text-sm opacity-80">æœ€ä½³å¾—åˆ†</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¸¬é©—æ¨¡çµ„ -->
        <div x-show="currentModule === 'quiz'" 
             x-transition:enter="module-fade-enter-active" 
             x-transition:enter-start="module-fade-enter-from" 
             x-transition:enter-end="" 
             x-transition:leave="module-fade-leave-active" 
             x-transition:leave-start="" 
             x-transition:leave-end="module-fade-leave-to">
            
            <h2 class="text-3xl font-bold text-white text-center mb-8 floating">
                <i class="fas fa-tasks mr-3"></i>ç†è§£æ¸¬é©—
            </h2>
            
            <div class="max-w-3xl mx-auto">
                <!-- æ¸¬é©—é€²è¡Œä¸­ -->
                <div x-show="!quizCompleted" class="glass-morphism rounded-xl p-6 text-white">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-lg font-semibold">
                                å•é¡Œ <span x-text="currentQuestionIndex + 1"></span> / <span x-text="questions.length"></span>
                            </span>
                            <div class="text-sm opacity-70">
                                <i class="fas fa-clock mr-1"></i>
                                <span x-text="formatTime(quizTimer)"></span>
                            </div>
                        </div>
                        
                        <div class="force-progress mb-4">
                            <div class="h-full bg-blue-400 transition-all duration-500" 
                                 :style="`width: ${((currentQuestionIndex + 1) / questions.length) * 100}%`"></div>
                        </div>
                        
                        <h3 class="text-xl font-semibold mb-6" x-text="currentQuestionData.question"></h3>
                    </div>
                    
                    <div class="space-y-4 mb-6">
                        <template x-for="(option, index) in currentQuestionData.options" :key="index">
                            <button @click="selectAnswer(index)"
                                    :disabled="userAnswers[currentQuestionIndex] !== null"
                                    class="w-full text-left p-4 rounded-lg transition-all duration-300 option-button"
                                    :class="{
                                        'correct': userAnswers[currentQuestionIndex] !== null && index === currentQuestionData.correctAnswer,
                                        'incorrect': userAnswers[currentQuestionIndex] !== null && index === userAnswers[currentQuestionIndex] && index !== currentQuestionData.correctAnswer,
                                        'bg-white bg-opacity-20 hover:bg-opacity-30': userAnswers[currentQuestionIndex] === null,
                                        'bg-white bg-opacity-10': userAnswers[currentQuestionIndex] !== null && index !== userAnswers[currentQuestionIndex] && index !== currentQuestionData.correctAnswer
                                    }">
                                <span class="font-bold mr-3" x-text="String.fromCharCode(65 + index) + '.'"></span>
                                <span x-text="option"></span>
                                <template x-if="userAnswers[currentQuestionIndex] !== null && index === currentQuestionData.correctAnswer">
                                    <i class="fas fa-check text-green-400 float-right mt-1"></i>
                                </template>
                                <template x-if="userAnswers[currentQuestionIndex] !== null && index === userAnswers[currentQuestionIndex] && index !== currentQuestionData.correctAnswer">
                                    <i class="fas fa-times text-red-400 float-right mt-1"></i>
                                </template>
                            </button>
                        </template>
                    </div>
                    
                    <!-- è§£æ -->
                    <div x-show="userAnswers[currentQuestionIndex] !== null" 
                         class="bg-blue-500 bg-opacity-20 border-l-4 border-blue-400 rounded-lg p-4 mb-6" 
                         x-transition>
                        <h4 class="font-bold text-blue-200 mb-2">
                            <i class="fas fa-lightbulb mr-2"></i>è§£æ
                        </h4>
                        <p x-text="currentQuestionData.explanation"></p>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="flex justify-end space-x-4">
                        <template x-if="currentQuestionIndex < questions.length - 1">
                            <button @click="nextQuestion()"
                                    :disabled="userAnswers[currentQuestionIndex] === null"
                                    class="px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-500 disabled:cursor-not-allowed rounded-lg transition-all duration-300">
                                ä¸‹ä¸€é¡Œ <i class="fas fa-chevron-right ml-2"></i>
                            </button>
                        </template>
                        <template x-if="currentQuestionIndex === questions.length - 1">
                            <button @click="finishQuiz()"
                                    :disabled="userAnswers[currentQuestionIndex] === null"
                                    class="px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-500 disabled:cursor-not-allowed rounded-lg transition-all duration-300">
                                å®Œæˆæ¸¬é©— <i class="fas fa-check-circle ml-2"></i>
                            </button>
                        </template>
                    </div>
                </div>

                <!-- æ¸¬é©—çµæœ -->
                <div x-show="quizCompleted" class="glass-morphism rounded-xl p-8 text-white text-center">
                    <div class="text-6xl mb-6">
                        <i :class="getScoreIcon()" :style="getScoreColor()"></i>
                    </div>
                    <h3 class="text-3xl font-bold mb-4">æ¸¬é©—å®Œæˆï¼</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-3xl font-bold" x-text="quizScore"></div>
                            <div class="text-sm opacity-80">æ­£ç¢ºç­”æ¡ˆ</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-3xl font-bold" x-text="getAccuracyRate() + '%'"></div>
                            <div class="text-sm opacity-80">æº–ç¢ºç‡</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-3xl font-bold" x-text="formatTime(quizTimer)"></div>
                            <div class="text-sm opacity-80">ç”¨æ™‚</div>
                        </div>
                    </div>
                    
                    <p class="text-xl mb-8" x-text="getQuizFeedback()"></p>
                    
                    <div class="space-x-4">
                        <button @click="retakeQuiz()" 
                                class="px-8 py-3 bg-blue-500 hover:bg-blue-600 rounded-lg transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-redo mr-2"></i>é‡æ–°æ¸¬é©—
                        </button>
                        <button @click="currentModule = 'dashboard'" 
                                class="px-8 py-3 bg-green-500 hover:bg-green-600 rounded-lg transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-chart-line mr-2"></i>æŸ¥çœ‹çµ±è¨ˆ
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- JavaScript -->
    <script>
        function qiaomuApp() {
            return {
                // åŸºæœ¬ç‹€æ…‹
                currentModule: 'dashboard',
                currentUser: {
                    name: localStorage.getItem('username') || 'å­¸ç¿’è€…',
                    email: localStorage.getItem('email') || 'user@demo.com'
                },
                learningStreak: 7,

                // å–®å­—å­¸ç¿’
                words: [
                    { 
                        word: 'native', 
                        phonetic: '/ËˆneÉªtÉªv/', 
                        definition: 'æœ¬åœ°çš„ï¼›å¤©ç”Ÿçš„ï¼›åœŸç”ŸåœŸé•·çš„', 
                        etymology: 'ä¾†è‡ªæ‹‰ä¸èª nativus "å¤©ç”Ÿçš„ï¼Œè‡ªç„¶çš„"', 
                        sentence: 'This is a truly AI Native browser.' 
                    },
                    { 
                        word: 'browser', 
                        phonetic: '/ËˆbraÊŠzÉ™r/', 
                        definition: 'ç€è¦½å™¨ï¼›ç€è¦½è€…', 
                        etymology: 'å‹•è© browse + -er å¾Œç¶´', 
                        sentence: 'You need an invitation code for the Dia browser.' 
                    },
                    { 
                        word: 'invitation', 
                        phonetic: '/ËŒÉªnvÉªËˆteÉªÊƒÉ™n/', 
                        definition: 'é‚€è«‹ï¼›è«‹å¸–ï¼›é‚€è«‹å‡½', 
                        etymology: 'ä¾†è‡ªæ‹‰ä¸èª invitare "é‚€è«‹"', 
                        sentence: 'Everyone should try to get an invitation code.' 
                    },
                    { 
                        word: 'encompass', 
                        phonetic: '/ÉªnËˆkÊŒmpÉ™s/', 
                        definition: 'åŒ…å«ï¼›ç’°ç¹ï¼›æ¶µè“‹', 
                        etymology: 'en- "ä½¿é€²å…¥" + compass "ç¯„åœ"', 
                        sentence: 'Questions that encompass all the content.' 
                    },
                    { 
                        word: 'extract', 
                        phonetic: '/ÉªkËˆstrÃ¦kt/', 
                        definition: 'æå–ï¼›æ‘˜éŒ„ï¼›ç²¾è¯', 
                        etymology: 'ex- "å‡º" + tract "æ‹‰" = æ‹‰å‡º', 
                        sentence: 'Extract all the stories from the text.' 
                    }
                ],
                currentWordIndex: 0,
                wordCardFlipped: false,

                // è²»æ›¼å­¸ç¿’
                feynmanWordIndex: -1,
                feynmanExplanation: '',
                feynmanFeedback: '',
                feynmanHistory: [],
                feynmanProgress: {
                    completed: 0,
                    total: 5
                },

                // å¼·è¿«å­¸ç¿’
                forceChallenge: {
                    active: false,
                    type: '',
                    timeLeft: 0,
                    totalTime: 0,
                    words: [],
                    currentQuestion: null,
                    score: 0,
                    target: 0,
                    completed: false,
                    success: false
                },
                forceProgress: {
                    level: 1,
                    totalChallenges: 0,
                    successRate: 0,
                    bestScore: 0
                },

                // æ¸¬é©—
                questions: [
                    {
                        question: "ä»€éº¼æ˜¯ 'native' é€™å€‹å–®å­—æœ€å¸¸è¦‹çš„å«ç¾©ï¼Ÿ",
                        options: ["å¤–åœ‹çš„", "æœ¬åœ°çš„", "ç¾ä»£çš„", "è¤‡é›œçš„"],
                        correctAnswer: 1,
                        explanation: "'native' æœ€å¸¸è¦‹çš„å«ç¾©æ˜¯æœ¬åœ°çš„ã€å¤©ç”Ÿçš„ï¼ŒæŒ‡æŸåœ°åŸç”¢çš„æˆ–èˆ‡ç”Ÿä¿±ä¾†çš„ç‰¹è³ªã€‚"
                    },
                    {
                        question: "å–®å­— 'encompass' çš„è©æ ¹å«ç¾©æ˜¯ä»€éº¼ï¼Ÿ",
                        options: ["æ‹‰å‡º", "ä½¿é€²å…¥", "åˆ†é›¢", "é€£æ¥"],
                        correctAnswer: 1,
                        explanation: "'encompass' ç”± en-ï¼ˆä½¿é€²å…¥ï¼‰+ compassï¼ˆç¯„åœï¼‰çµ„æˆï¼Œè¡¨ç¤ºåŒ…å«æˆ–æ¶µè“‹ã€‚"
                    },
                    {
                        question: "ä¸‹åˆ—å“ªå€‹å–®å­—èˆ‡ 'extract' çš„è©æ ¹æ§‹æˆæœ€ç›¸ä¼¼ï¼Ÿ",
                        options: ["attract", "contract", "subtract", "ä»¥ä¸Šçš†æ˜¯"],
                        correctAnswer: 3,
                        explanation: "é€™äº›å–®å­—éƒ½å«æœ‰æ‹‰ä¸èªè©æ ¹ 'tract'ï¼Œæ„æ€æ˜¯æ‹‰ã€æ‹–æ‹½ã€‚"
                    }
                ],
                currentQuestionIndex: 0,
                userAnswers: {},
                quizScore: 0,
                quizCompleted: false,
                quizTimer: 0,

                // åˆå§‹åŒ–
                init() {
                    this.loadUserData();
                    this.startQuizTimer();
                    this.questions.forEach((_, index) => {
                        this.userAnswers[index] = null;
                    });
                },

                // ç”¨æˆ¶æ•¸æ“šç®¡ç†
                loadUserData() {
                    const savedData = localStorage.getItem('qiaomu-user-data');
                    if (savedData) {
                        const userData = JSON.parse(savedData);
                        this.learningStreak = userData.learningStreak || 7;
                        this.feynmanHistory = userData.feynmanHistory || [];
                        this.forceProgress = userData.forceProgress || this.forceProgress;
                    }
                },

                saveUserData() {
                    const userData = {
                        learningStreak: this.learningStreak,
                        feynmanHistory: this.feynmanHistory,
                        forceProgress: this.forceProgress,
                        lastSaved: new Date().toISOString()
                    };
                    localStorage.setItem('qiaomu-user-data', JSON.stringify(userData));
                },

                // å–®å­—å­¸ç¿’æ–¹æ³•
                get currentWordData() {
                    return this.words[this.currentWordIndex] || {};
                },

                nextWord() {
                    if (this.currentWordIndex < this.words.length - 1) {
                        this.currentWordIndex++;
                        this.wordCardFlipped = false;
                    }
                },

                prevWord() {
                    if (this.currentWordIndex > 0) {
                        this.currentWordIndex--;
                        this.wordCardFlipped = false;
                    }
                },

                // è²»æ›¼å­¸ç¿’æ–¹æ³•
                get currentFeynmanWord() {
                    return this.words[this.feynmanWordIndex] || {};
                },

                selectFeynmanWord(index) {
                    this.feynmanWordIndex = index;
                    this.feynmanExplanation = '';
                    this.feynmanFeedback = '';
                },

                checkFeynmanExplanation() {
                    if (this.feynmanExplanation.length > 100) {
                        this.feynmanFeedback = "å¾ˆå¥½ï¼ä½ çš„è§£é‡‹å¾ˆè©³ç´°ã€‚è¨˜ä½è¦ç”¨ç°¡å–®çš„èªè¨€ï¼Œå°±åƒåœ¨æ•™å°å­©ä¸€æ¨£ã€‚";
                    } else if (this.feynmanExplanation.length > 50) {
                        this.feynmanFeedback = "ä¸éŒ¯çš„é–‹å§‹ï¼å¯ä»¥å†è©³ç´°ä¸€äº›ï¼Œå¢åŠ ä¸€äº›ä¾‹å­æœƒæ›´å¥½ã€‚";
                    } else {
                        this.feynmanFeedback = "";
                    }
                },

                submitFeynmanExplanation() {
                    const rating = Math.floor(Math.random() * 2) + 4; // 4-5 æ˜Ÿè©•åˆ†
                    const feedback = rating === 5 ? "å„ªç§€çš„è§£é‡‹ï¼" : "å¾ˆå¥½çš„å˜—è©¦ï¼";
                    
                    this.feynmanHistory.unshift({
                        word: this.currentFeynmanWord.word,
                        explanation: this.feynmanExplanation,
                        rating: rating,
                        feedback: feedback,
                        date: new Date().toLocaleDateString('zh-TW')
                    });
                    
                    this.feynmanProgress.completed++;
                    this.feynmanWordIndex = -1;
                    this.feynmanExplanation = '';
                    this.feynmanFeedback = '';
                    this.saveUserData();
                    
                    alert(`è²»æ›¼è§£é‡‹å·²æäº¤ï¼ç²å¾— ${rating} æ˜Ÿè©•åƒ¹ï¼š${feedback}`);
                },

                startFeynmanExplanation() {
                    this.currentModule = 'feynman';
                    this.selectFeynmanWord(this.currentWordIndex);
                },

                // å¼·è¿«å­¸ç¿’æ–¹æ³•
                startForceChallenge(type) {
                    this.forceChallenge = {
                        active: true,
                        type: type,
                        timeLeft: type === 'memory' ? 60 : 30,
                        totalTime: type === 'memory' ? 60 : 30,
                        words: type === 'memory' ? this.getRandomWords(10) : [],
                        currentQuestion: type === 'quiz' ? this.getRandomQuestion() : null,
                        score: 0,
                        target: type === 'memory' ? 10 : 5,
                        completed: false,
                        success: false
                    };
                    
                    this.startForceTimer();
                },

                startForceTimer() {
                    const timer = setInterval(() => {
                        this.forceChallenge.timeLeft--;
                        
                        if (this.forceChallenge.timeLeft <= 0) {
                            clearInterval(timer);
                            this.completeForceChallenge();
                        }
                    }, 1000);
                },

                answerForceQuestion(answerIndex) {
                    if (answerIndex === this.forceChallenge.currentQuestion.correctAnswer) {
                        this.forceChallenge.score++;
                    }
                    
                    if (this.forceChallenge.score >= this.forceChallenge.target) {
                        this.forceChallenge.success = true;
                        this.completeForceChallenge();
                    } else {
                        // ä¸‹ä¸€é¡Œ
                        this.forceChallenge.currentQuestion = this.getRandomQuestion();
                    }
                },

                completeForceChallenge() {
                    this.forceChallenge.completed = true;
                    this.forceChallenge.active = false;
                    
                    if (this.forceChallenge.score >= this.forceChallenge.target) {
                        this.forceChallenge.success = true;
                    }
                    
                    // æ›´æ–°çµ±è¨ˆ
                    this.forceProgress.totalChallenges++;
                    if (this.forceChallenge.success) {
                        this.forceProgress.level = Math.min(this.forceProgress.level + 1, 10);
                    }
                    this.forceProgress.bestScore = Math.max(this.forceProgress.bestScore, this.forceChallenge.score);
                    this.forceProgress.successRate = Math.round(
                        (this.forceProgress.successRate * (this.forceProgress.totalChallenges - 1) + 
                         (this.forceChallenge.success ? 100 : 0)) / this.forceProgress.totalChallenges
                    );
                    
                    this.saveUserData();
                },

                retryForceChallenge() {
                    const type = this.forceChallenge.type;
                    this.endForceChallenge();
                    this.startForceChallenge(type);
                },

                endForceChallenge() {
                    this.forceChallenge = {
                        active: false,
                        type: '',
                        timeLeft: 0,
                        totalTime: 0,
                        words: [],
                        currentQuestion: null,
                        score: 0,
                        target: 0,
                        completed: false,
                        success: false
                    };
                },

                getRandomWords(count) {
                    const shuffled = [...this.words].sort(() => Math.random() - 0.5);
                    return shuffled.slice(0, Math.min(count, this.words.length));
                },

                getRandomQuestion() {
                    const randomIndex = Math.floor(Math.random() * this.questions.length);
                    return this.questions[randomIndex];
                },

                // æ¸¬é©—æ–¹æ³•
                get currentQuestionData() {
                    return this.questions[this.currentQuestionIndex] || {};
                },

                startQuizTimer() {
                    setInterval(() => {
                        if (!this.quizCompleted) {
                            this.quizTimer++;
                        }
                    }, 1000);
                },

                selectAnswer(index) {
                    if (this.userAnswers[this.currentQuestionIndex] === null) {
                        this.userAnswers[this.currentQuestionIndex] = index;
                    }
                },

                nextQuestion() {
                    if (this.currentQuestionIndex < this.questions.length - 1) {
                        this.currentQuestionIndex++;
                    }
                },

                finishQuiz() {
                    this.calculateScore();
                    this.quizCompleted = true;
                },

                calculateScore() {
                    let score = 0;
                    this.questions.forEach((question, index) => {
                        if (this.userAnswers[index] === question.correctAnswer) {
                            score++;
                        }
                    });
                    this.quizScore = score;
                },

                retakeQuiz() {
                    this.currentQuestionIndex = 0;
                    this.quizCompleted = false;
                    this.quizScore = 0;
                    this.quizTimer = 0;
                    this.questions.forEach((_, index) => {
                        this.userAnswers[index] = null;
                    });
                },

                // çµ±è¨ˆæ–¹æ³•
                getAccuracyRate() {
                    if (this.questions.length === 0) return 0;
                    return Math.round((this.quizScore / this.questions.length) * 100);
                },

                getRemainingWords() {
                    return Math.max(0, this.words.length - this.currentWordIndex - 1);
                },

                getQuizFeedback() {
                    const percentage = this.getAccuracyRate();
                    if (percentage === 100) return "ğŸ‰ å®Œç¾ï¼ä½ å®Œå…¨æŒæ¡äº†å…§å®¹ï¼";
                    if (percentage >= 80) return "ğŸŒŸ å„ªç§€ï¼ä½ çš„ç†è§£å¾ˆåˆ°ä½ï¼";
                    if (percentage >= 60) return "ğŸ‘ ä¸éŒ¯ï¼ç¹¼çºŒåŠ æ²¹ï¼";
                    return "ğŸ’ª éœ€è¦å¤šåŠ ç·´ç¿’ï¼Œä¸è¦æ”¾æ£„ï¼";
                },

                getScoreIcon() {
                    const percentage = this.getAccuracyRate();
                    if (percentage >= 90) return 'fas fa-trophy';
                    if (percentage >= 70) return 'fas fa-medal';
                    if (percentage >= 50) return 'fas fa-star';
                    return 'fas fa-heart';
                },

                getScoreColor() {
                    const percentage = this.getAccuracyRate();
                    if (percentage >= 90) return 'color: #ffd700;';
                    if (percentage >= 70) return 'color: #c0c0c0;';
                    if (percentage >= 50) return 'color: #cd7f32;';
                    return 'color: #ff6b6b;';
                },

                // å·¥å…·æ–¹æ³•
                formatTime(seconds) {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                },

                resetToHome() {
                    this.currentModule = 'dashboard';
                    this.currentWordIndex = 0;
                    this.wordCardFlipped = false;
                }
            };
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
            if (!localStorage.getItem('username')) {
                window.location.href = 'login.html';
                return;
            }
            
            console.log('å–¬æœ¨è‹±èªé›™å‘è²»æ›¼å­¸ç¿’å¹³å°å·²è¼‰å…¥');
        });
    </script>
</body>
</html>